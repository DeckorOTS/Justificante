/* FormViewer - v1.2.0 | Copyright 2022 IDRsolutions */
!function(){"use strict";var s,u,a,c,l,f,m,t,o,n,i,r,x,d,g,p,O,e,T,V,k,H,D,h,R,v,E,F,z,b,L,S,A={LAYOUT_CONTINUOUS:"continuous",SELECT_SELECT:"select",SELECT_PAN:"pan",ZOOM_SPECIFIC:"specific",ZOOM_ACTUALSIZE:"actualsize",ZOOM_FITWIDTH:"fitwidth",ZOOM_FITHEIGHT:"fitheight",ZOOM_FITPAGE:"fitpage",ZOOM_AUTO:"auto"},C=1,P=0,Y=[],w=[],I=10,Z={},y=!1,B=(A.setup=function(e){e=e||FormViewer.config,y=!0,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),c=e.bounds,P=e.pagecount,e.url&&e.url,m=!!e.isR2L,s=N("formviewer"),m&&U.addClass(s,"isR2L"),_.setup();var t=document.createElement("style");t.setAttribute("type","text/css"),document.head.appendChild(t),t.sheet,(C<1||P<C)&&(C=1);for(var o=0;o<P;o++)if(c[o][0]!=c[0][0]||c[o][1]!=c[0][1]){0;break}f!==FormViewer.LAYOUT_CONTINUOUS&&(f=FormViewer.LAYOUT_CONTINUOUS);t=[A.LAYOUT_CONTINUOUS];for(f===FormViewer.LAYOUT_CONTINUOUS&&(u=W),window.addEventListener("resize",function(){_.updateZoom()}),l=N("overlay"),M.setup(),(m=null==(m=N("contentContainer"))?N("mainXFAForm"):m).style.transform="translateZ(0)",m.style.padding=I/2+"px",o=1;o<=P;o++){var n=N("page"+o);n.setAttribute("style","width: "+c[o-1][0]+"px; height: "+c[o-1][1]+"px;"),w[o]=n,Y[o]=B(n,o)}u.setup(C),U.addClass(s,"layout-"+u.toString()),_.updateZoomToDefault(),u.goToPage(C);var i,r={selectMode:M.currentSelectMode,isMobile:a,layout:u.toString(),availableLayouts:t,isFirstPage:1===C,isLastPage:u.isLastPage(C)};for(i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.page=C,A.fire("ready",r)},function(e,t){var o={isVisible:function(){return!0},isLoaded:function(){return!0},hide:function(){},unload:function(){A.fire("pageunload",{page:t})},load:function(){A.fire("pageload",{page:t})}};return o}),G=function(e){C!=e&&(C=e,A.fire("pagechange",{page:C,pagecount:P,isFirstPage:1===C,isLastPage:u.isLastPage(e)}))},W=(n=o=0,i=[],(t={}).setup=function(){s.addEventListener("scroll",r);for(var e=0;e<P;e++)c[e][0]>o&&(o=c[e][0]),c[e][1]>n&&(n=c[e][1])},t.unload=function(){s.removeEventListener("scroll",r)},r=function(){x()},x=function(){var e;if(0<w[1].getBoundingClientRect().top)G(1);else for(e=1;e<=P;e++){var t=w[e].getBoundingClientRect(),o=t.top,t=t.bottom-t.top;if(o<=.25*t&&.5*-t<o){G(e);break}}d()},d=function(){i=[C];for(var t,o=s.clientHeight,e=function(e){return 0<(t=w[e].getBoundingClientRect()).bottom&&t.top<o},n=C-1;1<=n&&e(n);n--)i.push(n);for(n=C+1;n<=P&&e(n);n++)i.push(n)},t.goToPage=function(e,t){var o=0;if(t){var n=t.split(" ");switch(n[0]){case"XYZ":o=Number(n[2]);break;case"FitH":o=Number(n[1]);break;case"FitR":o=Number(n[4]);break;case"FitBH":o=Number(n[1])}0!==(o=isNaN(o)||o<0||o>c[e-1][1]?0:o)&&(o=c[e-1][1]-o)}t=_.getZoom();s.scrollTop=w[e].offsetTop-I/2+o*t,G(e),d()},t.getVisiblePages=function(){return i},t.updateLayout=function(){},t.isLastPage=function(e){return e===P},t.getZoomBounds=function(){return{width:o,height:n}},t.getAutoZoom=function(e){return t.getZoomBounds().width>s.clientWidth-I?e:1},t.next=function(){A.goToPage(C+1)},t.prev=function(){A.goToPage(C-1)},t.toString=function(){return FormViewer.LAYOUT_CONTINUOUS},t),X=function(e){try{e.getSelection?e.getSelection().empty?e.getSelection().empty():e.getSelection().removeAllRanges&&e.getSelection().removeAllRanges():e.document.selection&&e.document.selection.empty()}catch(t){}},M=(T=!(e={}),e.setup=function(){switch(O){case FormViewer.SELECT_PAN:case FormViewer.SELECT_SELECT:break;default:O=FormViewer.SELECT_SELECT}this.currentSelectMode=O,this.currentSelectMode==A.SELECT_SELECT?e.enableTextSelection():e.enablePanning()},e.enableTextSelection=function(){this.currentSelectMode=A.SELECT_SELECT,U.removeClass(l,"panning"),l.removeEventListener("mousedown",V),document.removeEventListener("mouseup",k),l.removeEventListener("mousemove",H)},V=function(e){return e=e||window.event,U.addClass(l,"mousedown"),g=e.clientX,p=e.clientY,!(T=!0)},k=function(){U.removeClass(l,"mousedown"),T=!1},H=function(e){if(T)return e=e||window.event,s.scrollLeft=s.scrollLeft+g-e.clientX,s.scrollTop=s.scrollTop+p-e.clientY,g=e.clientX,p=e.clientY,!1},e.enablePanning=function(){this.currentSelectMode=A.SELECT_PAN,X(window),U.addClass(l,"panning"),l.addEventListener("mousedown",V),document.addEventListener("mouseup",k),l.addEventListener("mousemove",H)},e.setDefaultMode=function(e){O=e},e),_=(A.setSelectMode=function(e){y?a||(e==A.SELECT_SELECT?M.enableTextSelection():M.enablePanning(),A.fire("selectchange",{type:e})):M.setDefaultMode(e)},v=A.ZOOM_AUTO,E=[.25,.5,.75,1,1.25,1.5,2,2.5,3,3.5,4],F=[A.ZOOM_AUTO,A.ZOOM_FITPAGE,A.ZOOM_FITHEIGHT,A.ZOOM_FITWIDTH,A.ZOOM_ACTUALSIZE],z=0,b=1,S=function(e){var t=u.getZoomBounds(),o=(s.clientWidth-I)/t.width,n=(s.clientHeight-I)/t.height,t=parseFloat(e);switch(isNaN(t)||(b=t,e=A.ZOOM_SPECIFIC),e=e||v){case A.ZOOM_AUTO:b=u.getAutoZoom(o,n);break;case A.ZOOM_FITWIDTH:b=o;break;case A.ZOOM_FITHEIGHT:b=n;break;case A.ZOOM_FITPAGE:b=Math.min(o,n);break;case A.ZOOM_ACTUALSIZE:b=1}return v=e,b},{setup:function(){var e=document.createElement("style");e.setAttribute("type","text/css"),document.head.appendChild(e),h=e.sheet},updateZoom:L=function(e){for(var t=!1,o=!1,e=(4<=(b=S(e))?(b=4,o=!0):b<=.25&&(b=.25,t=!0),s.scrollTop/s.scrollHeight),n=(u.updateLayout(),u.getVisiblePages()),i=1;i<=P;i++)-1===n.indexOf(i)&&Y[i].hide();D&&h.deleteRule(D);var r=function(e,t,o,n){n=n?"translate3d("+e+"px, "+t+"px, 0) scale("+o+")":"translateX("+e+"px) translateY("+t+"px) scale("+o+")";return"-webkit-transform: "+n+";\n-ms-transform: "+n+";\ntransform: "+n+";"}(0,0,b,!1);D=h.insertRule(".page-inner { \n"+r+"\n}",h.cssRules.length);for(var a=0;a<P;a++)w[a+1].style.width=Math.floor(c[a][0]*b)+"px",w[a+1].style.height=Math.floor(c[a][1]*b)+"px";s.scrollTop=s.scrollHeight*e,++z%2==1&&L(),A.fire("zoomchange",{zoomType:v,zoomValue:b,isMinZoom:t,isMaxZoom:o})},updateZoomToDefault:function(){L(R)},zoomIn:function(){L(function(){for(var e,t=b,o=E[E.length-1],n=0;n<E.length;n++)if(t<E[n]){o=E[n];break}for(n=0;n<F.length;n++){var i=S(F[n]);t<i&&i<=o&&(e&&i===o||(e=F[n],o=i))}return e||o}())},zoomOut:function(){L(function(){for(var e,t=b,o=E[0],n=E.length-1;0<=n;n--)if(E[n]<t){o=E[n];break}for(n=0;n<F.length;n++){var i=S(F[n]);i<t&&o<=i&&(e&&i===o||(e=F[n],o=i))}return e||o}())},getZoom:function(){return b},setDefault:function(e){R=e}}),N=(A.zoomIn=function(){_.zoomIn()},A.zoomOut=function(){_.zoomOut()},A.setZoom=function(e){y?_.updateZoom(e):_.setDefault(e)},A.goToPage=function(e,t){y?1<=e&&e<=P&&u.goToPage(Number(e),t):C=e},A.next=function(){u.next()},A.prev=function(){u.prev()},A.setLayout=function(e){y?(u.unload(),U.removeClass(s,"layout-"+u.toString()),(u=W).setup(C),U.addClass(s,"layout-"+u.toString()),_.updateZoom(FormViewer.ZOOM_AUTO),u.goToPage(C),A.fire("layoutchange",{layout:e})):f=e},A.updateLayout=function(){_.updateZoom()},function(e){return document.getElementById(e)}),U=(A.on=function(e,t){Z[e]||(Z[e]=[]),-1===Z[e].indexOf(t)&&Z[e].push(t)},A.off=function(e,t){Z[e]&&-1!==(t=Z[e].indexOf(t))&&Z[e].splice(t,1)},A.fire=function(e,t){Z[e]&&Z[e].forEach(function(e){e(t)})},{addClass:function(e,t){var o=0!==e.className.length?e.className.split(" "):[];-1===o.indexOf(t)&&(o.push(t),e.className=o.join(" "))},removeClass:function(){for(var e=arguments[0],t=0!==e.className.length?e.className.split(" "):[],o=1;o<arguments.length;o++){var n=t.indexOf(arguments[o]);-1!==n&&t.splice(n,1)}e.className=t.join(" ")}}),j=(A.handleFormSubmission=function(e,t){FormVuAPI&&((e=e||window.prompt("Please enter the URL to submit to"))?j(e,t):console.log("No URL provided for FormSubmission"))},function(e,t){if(FormVuAPI){var o={url:e,success:function(){alert("Form submitted successfully")},failure:function(){alert("Form failed to submit, please try again")}},t="string"==typeof t?t.toLowerCase():"";if(e.startsWith("mailto:"))o.format=t,FormVuAPI.submitFormAsMail(o);else switch(t){case"json":"function"==typeof FormVuAPI.submitFormAsJSON&&FormVuAPI.submitFormAsJSON(o);break;case"pdf":"function"==typeof FormVuAPI.submitFormAsPDF&&FormVuAPI.submitFormAsPDF(o);break;default:"function"==typeof FormVuAPI.submitFormAsFormData&&FormVuAPI.submitFormAsFormData(o)}}});"function"==typeof define&&define.amd?define(["formviewer"],[],function(){return A}):"object"==typeof module&&module.exports?module.exports=A:window.FormViewer=A}();